<app-header title="Chat con DeepSeek"></app-header>

<ion-content class="ion-padding">
  <!-- Input para enviar mensajes -->
  <ion-item>
    <ion-input
      [(ngModel)]="mensaje"
      placeholder="Escribe tu mensaje..."
      (keyup.enter)="enviarMensaje()"
    ></ion-input>
    <ion-button (click)="enviarMensaje()" slot="end">Enviar</ion-button>
  </ion-item>

  <!-- Mostrar mensajes del chat -->
  <div class="chat-container">
    <div *ngFor="let msg of mensajes" class="mensaje">
      <strong>{{ msg.role === 'user' ? 'TÃº' : 'DeepSeek' }}:</strong>
      <p>{{ msg.content }}</p>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="ion-text-center ion-margin-top">
    <ion-spinner name="crescent"></ion-spinner>
    <p>Enviando mensaje...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="ion-text-center ion-margin-top">
    <ion-chip color="danger">
      <ion-icon name="warning"></ion-icon>
      <ion-label>{{ error }}</ion-label>
    </ion-chip>
  </div>
</ion-content>